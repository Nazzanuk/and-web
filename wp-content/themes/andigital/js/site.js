function initLog(){$("#log").dblclick(function(){clearLog()})}function clearLog(){$("#log").html("")}var log=function(a){console.log(a)},Utils={};Utils.rotate=function(a){var b=$(a.target),c=500;a.duration&&(c=a.duration),$({deg:a.currentAngle}).animate({deg:a.angle},{duration:c,step:function(a){b.css({transform:"rotate("+a+"deg)"})}})};var Site={};Site.width=0,Site.height=0,Site.minWidth=300,Site.hasMediaQueries=!0,Site.screenTop,Site.pageID="",Site.init=function(){Header.init(),Modernizr.mq("only all")||(Site.hasMediaQueries=!1,Site.minWidth=1100,$("html").css("min-width",Site.minWidth)),$("#menu-link").click(Menu.show),$("#share-link").click(Share.show);var a=$("section").length,b=0;$("section").each(function(c,d){b!=a-1&&!$(d).hasClass("no-underline"),b++}),Menu.init(),Feature.init(),Share.init(),Quote.init(),Vimeo.init()},Site.isTabletOrPhone=function(){return Site.hasMediaQueries&&$(window).width()<700},Site.enableScroll=function(){var a=parseInt($("html").css("top"));$("html").removeClass("no-scroll"),Header.modeAnimate=!1,$("html,body").scrollTop(-a)},Site.disableScroll=function(){var a=$("html").scrollTop()?$("html").scrollTop():$("body").scrollTop();$("html").addClass("no-scroll").css("top",-a)},Site.scrollToHeader=function(a){Header.changeMode(MODE_FIXED),Header.resize(),a.offset=-Header.height+(a.offset?a.offset:0),Site.scrollTo(a)},Site.resize=function(){Site.width=Math.round($(window).width()),Site.height=Math.round($(window).height()),Site.width<Site.minWidth&&(Site.width=Site.minWidth),Menu.resize(),Feature.resize(),SectionsMenu.resize(),Header.resize(),Quote.resize(),Vimeo.resize()},Site.underlineHeadings=function(){for(var a=1;4>a;a++){var b='<div class="underline-'+a+'"></div>';$("h"+a+":not(.no-underline)").append(b)}},Site.scrollTo=function(a){var b=$(window).scrollTop();if(a){void 0==a.selector&&(a.selector="html:not(:animated),body:not(:animated)");var c=0;if(a.offset&&(c=a.offset),void 0==a.speed&&(a.speed=500),void 0==a.position&&(a.position=0),a.target){var d=$("#"+a.target).offset().top;a.position=d+c}if(a.targetElement){var d=$(a.targetElement).offset().top;a.position=d+c}a.complete?$(a.selector).stop().animate({scrollTop:a.position},a.speed,a.complete):$(a.selector).stop().animate({scrollTop:a.position},a.speed)}return b},Site.onScroll=function(){Site.screenTop=$(document).scrollTop();var a=Feature.height+30;Header.hasTabs&&(a+=60),Site.screenTop>=a?(Header.changeMode(MODE_FIXED),SectionsMenu.show()):(Header.changeMode(MODE_DEFAULT),SectionsMenu.hide()),SectionsMenu.getCurrent()};var MODE_DEFAULT="default",MODE_FIXED="fixed",TYPE_DEFAULT="type-default",TYPE_RED="type-red",Header={};Header.type=TYPE_DEFAULT,Header.mode=MODE_DEFAULT,Header.modeAnimate=!0,Header.defaultHeight=80,Header.defaultTop=-15,Header.height=60,Header.hasTabs=!1,Header.init=function(){},Header.setType=function(a){Header.type=a},Header.changeMode=function(a){Header.mode!=a&&(Header.mode=a,Header.mode==MODE_DEFAULT?$("header").stop().animate({"margin-top":-(Header.defaultHeight+1)},{duration:400,complete:function(){var a=0;Header.type==TYPE_RED&&(a=-15),$("header").css("margin-top",a),$("header").removeClass("fixed")}}):($("header").addClass("fixed"),Header.modeAnimate?($("header").css("margin-top",-(Header.defaultHeight+1)),$("header").stop().animate({"margin-top":Header.defaultTop},{duration:400})):(Header.modeAnimate=!0,$("header").css("margin-top",Header.defaultTop))))},Header.loadTabs=function(a){var b="";b+='<div id="menu-tabs-outer">',b+='<div id="menu-tabs">';for(var c='<div class="divider"></div>',d=0;d<a.length;d++){var e=a[d];0!=d&&(b+=c),b+='<a href="../'+e.url+'" class="'+e.selected+" tab-"+(d+1)+'">'+e.label+"</a>"}b+="</div>",b+="</div>",$("header").append(b),Header.hasTabs=!0},Header.resize=function(){Header.mode==MODE_DEFAULT?Header.height="default"==Header.type?$(window).width()<=700?Header.hasTabs?105:70:97:$(window).width()<=700?Header.hasTabs?105:70:80:Header.mode==MODE_FIXED&&(Header.height=$(window).width()<=700?Header.hasTabs?105:55:65)};var Menu={};Menu.visible=!1,Menu.items=["what-we-do","who-we-are","join-us","contact-us"],Menu.defaultImageWidth=1600,Menu.defaultImageHeight=1100,Menu.init=function(){$(window).keyup(function(a){27==a.keyCode&&Menu.hide()}),$("#menu-close").click(Menu.hide),$("#menu .menu-item").mouseover(function(){}),$("#menu .menu-item").mouseout(function(){})},Menu.show=function(){$("#menu-link").fadeTo(0,0),Menu.visible=!0,Site.disableScroll(),$("#menu .what-we-do").css("opacity",0),$("#menu .who-we-are").css("opacity",0),$("#menu .contact-us").css("opacity",0),$("#menu .join-us").css("opacity",0),$("#menu-wrapper").addClass("visible"),Menu.resize(),$("#menu .what-we-do").stop().fadeTo(200,1),$("#menu .who-we-are").stop().delay(100).fadeTo(200,1),$("#menu .join-us").stop().delay(200).fadeTo(200,1),$("#menu .contact-us").stop().delay(300).fadeTo(200,1),$("#menu-close").fadeTo(0,0),$("#menu-close").stop().delay(400).fadeTo(200,1)},Menu.hide=function(){Menu.visible&&($("#menu-close").fadeTo(0,0),Menu.visible=!1,$("#menu .what-we-do").stop().fadeTo(200,0),$("#menu .who-we-are").stop().delay(100).fadeTo(200,0),$("#menu .join-us").stop().delay(200).fadeTo(200,0),$("#menu .contact-us").stop().delay(300).fadeTo(200,0,function(){$("#menu-wrapper").removeClass("visible"),Site.enableScroll()}),$("#menu-link").delay(400).fadeTo(200,1))},Menu.resize=function(){if(Menu.visible)for(var a=0;a<Menu.items.length;a++){var b={id:Menu.items[a]};b.element=$("#menu ."+b.id),b.width=b.element.width(),b.height=b.element.height(),b.image={},b.image.element=$("#menu ."+b.id+" img"),b.image.width=.8*Site.width,b.image.ratio=b.image.width/Menu.defaultImageWidth,b.image.height=Math.floor(Menu.defaultImageHeight*b.image.ratio),b.image.height<.8*Site.height&&(b.image.height=.8*Site.height,b.image.ratio=b.image.height/Menu.defaultImageHeight,b.image.width=Math.floor(Menu.defaultImageWidth*b.image.ratio)),b.image.top=0,b.image.left=Math.round((Site.width/2-b.image.width)/2),Site.width<=600&&(b.image.width=Site.width,b.image.ratio=b.image.width/Menu.defaultImageWidth,b.image.height=Math.floor(Menu.defaultImageHeight*b.image.ratio),b.image.left=0,b.image.height<Site.height/4&&(b.image.height=Site.height/4,b.image.ratio=b.image.height/Menu.defaultImageHeight,b.image.width=Math.floor(Menu.defaultImageWidth*b.image.ratio),b.image.left=Math.round((Site.width/2-b.image.width)/2))),b.label={},b.label.element=$("#menu ."+b.id+" .label"),b.label.left=(b.width-b.label.element.width())/2,b.label.top=(b.height-b.label.element.height())/2+20,b.label.element.css("left",b.label.left),b.label.element.css("top",b.label.top),b.image.element.width(b.image.width),b.image.element.height(b.image.height),b.image.element.css("top",b.image.top),b.image.element.css("left",b.image.left)}};var Share={};Share.visible=!1,Share.init=function(){$(window).keyup(function(a){27==a.keyCode&&Share.hide()}),$("#share-close").click(Share.hide)},Share.show=function(){$("#menu-link").fadeTo(0,0),Share.visible=!0,Site.disableScroll(),$("#share-wrapper").addClass("visible"),$(".share").addClass("overlay-open")},Share.hide=function(){Share.visible&&(Share.visible=!1,$("#share-wrapper").removeClass("visible"),$(".share").removeClass("overlay-open"),Site.enableScroll(),$("#menu-link").fadeTo(200,1))},$(function(){$("#url").click(function(){$(this).select()})});var Feature={};Feature.defaultImageWidth=2400,Feature.defaultImageHeight=1600,Feature.heightPercentage=.75,Feature.titleOffset=0,Feature.height=0,Feature.visibleScrollArrow=!0,Feature.init=function(){$("#feature-img").fadeTo(0,1),Feature.hideElement("#feature h1"),$("#feature #scroll-arrow").mouseover(function(){$(this).stop().animate({bottom:40,duration:100})}),$("#feature #scroll-arrow").mouseout(function(){$(this).stop().animate({bottom:50,duration:100})}),$("#feature #scroll-arrow").click(function(){Site.scrollTo({position:Site.height})}),Feature.heightPercentage<1&&$("#feature #scroll-arrow").css("display","none"),Feature.bounceScrollArrow({delay:1e3})},Feature.resize=function(){{var a={};Site.height}a.element=$("#feature"),a.width=Math.round($("#feature").width()),a.height=Site.height*Feature.heightPercentage,Header.hasTabs,a.image={},a.image.element=$("#feature #feature-img"),a.image.width=Site.width,a.image.ratio=a.image.width/Feature.defaultImageWidth,a.image.height=Feature.defaultImageHeight*a.image.ratio,a.image.height<a.height&&(a.image.height=a.height,a.image.ratio=a.image.height/Feature.defaultImageHeight,a.image.width=Feature.defaultImageWidth*a.image.ratio),a.image.left=(a.width-a.image.width)/2,a.image.top=0,"home"==Site.pageID&&(a.image.left=0),a.image.element.width(a.image.width),a.image.element.height(a.image.height),a.image.element.css("left",a.image.left),a.element.height(a.height);var b={};b.element=$("#feature h1"),b.left=($("#feature").width()-b.element.width())/2,b.top=($("#feature").height()-b.element.height())/2-30,b.element.css("left",b.left),b.element.css("top",b.top-b.top*Feature.titleOffset),a.scrollArrow={},a.scrollArrow.element=$("#feature #scroll-arrow"),a.scrollArrow.left=(Site.width-a.scrollArrow.element.width())/2,a.scrollArrow.element.css("left",a.scrollArrow.left),Feature.height=a.height,Feature.showElement("#feature h1")},Feature.hideScroll=function(){Feature.visibleScrollArrow&&(Feature.visibleScrollArrow=!1,$("#feature #scroll-arrow").fadeTo(200,0))},Feature.imageLoaded=function(){$("#feature-img").stop().fadeTo(500,1)},Feature.hideElement=function(a){$(a).css("display","none"),$(a).fadeTo(0,0)},Feature.showElement=function(a){$(a).data("visible")||($(a).data("visible",!0),$(a).css("display","none"),$(a).fadeTo(500,1))},Feature.bounceScrollArrow=function(a){$("#feature #scroll-arrow").delay(a.delay).animate({bottom:40,duration:100},function(){$("#feature #scroll-arrow").animate({bottom:50,duration:100},function(){$("#feature #scroll-arrow").animate({bottom:40,duration:100},function(){$("#feature #scroll-arrow").animate({bottom:50,duration:100},function(){})})})})};var SectionsMenu={};SectionsMenu.created=!1,SectionsMenu.width,SectionsMenu.height=60,SectionsMenu.top=0,SectionsMenu.right=0,SectionsMenu.paddingLeft=0,SectionsMenu.element,SectionsMenu.sections=[],SectionsMenu.visible=!1,SectionsMenu.currentIndexIndex=-1,SectionsMenu.init=function(){var a=$("section").length;if(a>1){var b="";b+='<div id="sections-menu">';var c=0;$("section").each(function(a,d){var e={};e.element=d,e.label=$(e.element).find("h2").first().text(),e.label.length>SectionsMenu.right&&(SectionsMenu.right=9*e.label.length),e.label.length>0&&(b+='<div id="section-link-'+a+'" class="section-link">',b+='<span class="label">'+e.label+"</span>",b+='<img class="default" src="'+Site.dir+'img/menu/section.png"/>',b+='<img class="current" src="'+Site.dir+'img/menu/section-current.png"/>',b+="</div>"),SectionsMenu.sections.push(e),c++}),b+="</div>",$("body").append(b),SectionsMenu.paddingLeft=SectionsMenu.right-20,SectionsMenu.right="-"+(SectionsMenu.right+20),SectionsMenu.element=$("#sections-menu"),$(".section-link .current").fadeTo(0,0),$(".section-link").click(function(){var a=this.id.split("section-link-")[1];SectionsMenu.gotosection(a)}),$(".section-link").mouseover(function(){var a=this.id.split("section-link-")[1];SectionsMenu.mouseover(a)}),$(".section-link").mouseout(function(){var a=this.id.split("section-link-")[1];SectionsMenu.mouseout(a)}),SectionsMenu.element.css("padding-left",SectionsMenu.paddingLeft+"px"),SectionsMenu.element.css("right",SectionsMenu.right+"px"),SectionsMenu.created=!0,SectionsMenu.resize(),SectionsMenu.select(0)}},SectionsMenu.resize=function(){SectionsMenu.created&&(SectionsMenu.width=SectionsMenu.element.width(),SectionsMenu.height=SectionsMenu.element.height(),SectionsMenu.top=(Site.height-SectionsMenu.height)/2,SectionsMenu.element.css("top",SectionsMenu.top),SectionsMenu.setPositions())},SectionsMenu.setPositions=function(){for(var a=0;a<SectionsMenu.sections.length;a++){var b=SectionsMenu.sections[a];b.top=$(b.element).offset().top}},SectionsMenu.getCurrent=function(){SectionsMenu.setPositions();for(var a=Site.screenTop+Site.height/2,b=0,c=SectionsMenu.sections.length-1;c>-1;c--){var d=SectionsMenu.sections[c];a<=d.top&&(b=c-1),a>SectionsMenu.sections[SectionsMenu.sections.length-1].top&&(b=SectionsMenu.sections.length-1),0>b&&(b=0)}SectionsMenu.select(b)},SectionsMenu.mouseover=function(a){if(a!=SectionsMenu.currentIndex){{SectionsMenu.sections[a]}$("#section-link-"+a+" .current").stop().fadeTo(200,1)}},SectionsMenu.mouseout=function(a){if(a!=SectionsMenu.currentIndex){{SectionsMenu.sections[a]}$("#section-link-"+a+" .current").stop().fadeTo(200,0)}},SectionsMenu.gotosection=function(a){var b=SectionsMenu.sections[a];Site.scrollTo({targetElement:b.element,offset:-100})},SectionsMenu.show=function(){SectionsMenu.visible||(SectionsMenu.visible=!0,$("#sections-menu").stop().animate({right:20},{duration:400}))},SectionsMenu.hide=function(){SectionsMenu.visible&&(SectionsMenu.visible=!1,$("#sections-menu").stop().animate({right:SectionsMenu.right},{duration:400}))},SectionsMenu.select=function(a){if(a!=SectionsMenu.currentIndex){if(-1!=SectionsMenu.currentIndex){{SectionsMenu.sections[SectionsMenu.currentIndex]}$("#section-link-"+SectionsMenu.currentIndex+" .current").stop().fadeTo(200,0),$("#section-link-"+SectionsMenu.currentIndex).removeClass("selected")}SectionsMenu.currentIndex=a;{SectionsMenu.sections[SectionsMenu.currentIndex]}$("#section-link-"+SectionsMenu.currentIndex+" .current").stop().fadeTo(200,1),$("#section-link-"+SectionsMenu.currentIndex).addClass("selected")}};var Quote={};Quote.videoWidth=360,Quote.videoHeight=200,Quote.init=function(){},Quote.resize=function(){$(".quote").each(function(a,b){var c={};c.element=$(b),c.video={},c.video.element=$(c.element).find(".main-video"),Site.width<=1e3?(c.video.width=Site.width+"px",c.video.height=Math.round(Site.width*(Quote.videoHeight/Quote.videoWidth))+"px"):(c.video.width=Quote.videoWidth+"px",c.video.height=Quote.videoHeight+"px"),c.video.element.css("width",c.video.width),c.video.element.css("height",c.video.height),c.video.element.find(".vimeo").css("width",c.video.width),c.video.element.find(".vimeo").css("height",c.video.height),c.video.top=Math.round((c.element.height()-c.video.element.height())/2),c.video.left="50px",Site.width<=1e3&&(c.video.left="auto",c.video.top=0),c.video.element.css("left",c.video.left),c.video.element.css("top",c.video.top),c.text={},c.text.element=$(c.element).find(".text"),c.text.right="50px",c.text.top=Math.round((c.element.height()-c.text.element.height())/2-20),Site.width<=1e3&&(c.text.right="auto",c.text.top=0),c.text.element.css("right",c.text.right),c.text.element.css("top",c.text.top)})};var Vimeo={};Vimeo.width=360,Vimeo.height=200,Vimeo.scaledWidth=500,Vimeo.init=function(){},Vimeo.resize=function(){Site.hasMediaQueries&&(Site.isTabletOrPhone()?($(".vimeo-video .vimeo").css("width",$(".vimeo-video").parent().width()+"px"),$(".vimeo-video .vimeo").css("height",Math.round($(".vimeo-video").parent().width()*(Vimeo.height/Vimeo.width))+"px")):($(".vimeo-video .vimeo").css("width",Vimeo.scaledWidth+"px"),$(".vimeo-video .vimeo").css("height",Math.round(Vimeo.scaledWidth*(Vimeo.height/Vimeo.width))+"px")))},$=jQuery,$(function(){initLog(),Site.init(),$(window).resize(function(){Site.resize()}),Site.resize(),$(document).scroll(Site.onScroll)});